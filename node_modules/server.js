import express from "express";
import mysql from "mysql";
import cors from "cors";
import http from "http";

const app = express();
const server = http.createServer(app);

app.use(cors({
    credentials: true,
    origin: "*"
}));

app.use(express.json({limit:"50mb"}));

const connection = mysql.createConnection({
    host: "localhost",
    user: "root",
    password: "071929",
    database: "travelix",
    port: 3306
});

// connection.connect((error) => {
//     if (error) {
//         throw error;

//     }
//     else {
//         console.log("my sql is connect sucessfully in node js")
//     }

// })


//http/localhost//3000//destination
app.post("/destination", (request, response) => {
    const form = request.body;
    const Count = parseInt(studentForm.destinationCount);
    const sqlQuery = `insert into destinationList (destinationName,destinationImage,destinationCount) values ('${studentForm.firstName}','${studentForm.destinationImage}','${Count}')`;
    connection.query(sqlQuery, (error, result) => {
        if (error) {
            response.status(500).send({
                message: "sorry somthing is wrong",
                error: error
            })
        }
        else {
            response.status(200).send(result);
        }
    })

})



const port = process.env.PORT || 4000;
server.listen(port, () => {
    console.log("node js Server running on port 4000");
})